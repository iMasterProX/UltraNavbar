4개 분석이 모두 완료되었습니다. 종합해서 각 질문에 답변드리겠습니다.

---

## v0.3.0 계획서 검토 답변

### 1. 지원 기종 버전을 낮출 수 있는가?

**현실적 최소 버전: Android 7.0 (API 24) — 권장 최소 버전: Android 8.0 (API 26)**

코드베이스에서 사용하는 핵심 API별 최소 요구 버전:

| 기능 | 필요 API | 비고 |
|------|---------|------|
| `TYPE_ACCESSIBILITY_OVERLAY` | API 22 | 핵심 오버레이 |
| `GLOBAL_ACTION_TOGGLE_SPLIT_SCREEN` | API 24 | 분할화면 |
| `ActivityInfo.resizeMode` | API 24 | 분할화면 지원 판단 |
| `FLAG_ACTIVITY_LAUNCH_ADJACENT` | API 24 | 분할화면 실행 |
| `NotificationChannel` | API 26 | 알림 채널 (필수) |
| `ShortcutInfo` / `ShortcutManager` | API 25 | 바로가기 기능 |
| `WindowMetrics` / `currentWindowMetrics` | API 30 | 이미 fallback 있음 (`defaultDisplay.getRealSize`) |
| `BLUETOOTH_CONNECT` 권한 | API 31 | 이미 fallback 가능 (구 `BLUETOOTH` 권한) |
| `POST_NOTIFICATIONS` 권한 | API 33 | 이전 버전은 자동 허용 |
| BLE GATT | API 18 | 배터리 측정 |
| `UsageStatsManager` | API 22 | 최근 앱 목록 |

**결론:** 
- 코드에 이미 `Build.VERSION.SDK_INT` 체크가 곳곳에 들어가 있어서 (`VERSION_CODES.N`, `R`, `LOLLIPOP_MR1` 등) 하위 호환 분기가 상당 부분 준비되어 있습니다.
- `NotificationChannel`이 API 26 필수이므로 **API 26 (Android 8.0)**이 현실적 최소선입니다.
- 분할화면을 실험적 기능으로 유지하면서 API 24까지 내릴 수도 있지만, 알림 채널 코드를 분기처리해야 합니다.
- **추천: minSdk 26 (Android 8.0)**. 대부분의 기능이 문제없이 작동하고, NotificationChannel이 기본 지원되며, 현재 사용 중인 안드로이드 태블릿의 대다수를 커버합니다.

---

### 2. 커스텀 네비바의 타 해상도 호환성

**가능합니다. 이미 상당 부분 대응되어 있습니다.**

분석 결과:
- 모든 치수가 **dp 단위**로 정의되어 있고 (`Constants.Dimension`), 런타임에 `Context.dpToPx()`로 변환합니다
- 네비바 너비: `MATCH_PARENT` → 어떤 해상도든 화면 폭에 맞춤
- 네비바 높이: 시스템 `navigation_bar_height` 리소스 조회 → fallback 48dp
- 분할화면 오버레이: `maximumWindowMetrics.bounds` 기반으로 동적 계산
- 태스크바: `WRAP_CONTENT`로 아이콘 수에 따라 자동 확장

**주의사항:**
- 버튼 48dp, 태스크바 아이콘 36dp는 7인치 소형 태블릿에서도 충분히 작동하지만, 6~7인치에서는 좀 빡빡할 수 있음
- 현재 `supports-screens`에 `requiresSmallestWidthDp="600"`이 설정되어 있어 스마트폰은 자동 제외됨
- 7인치 태블릿 지원 시 이 값을 유지하거나 약간 낮출 수 있음 (7인치는 보통 600dp 이상)
- 분할화면 오버레이의 50:50 분할 비율이 일부 기기에서 시스템 실제 분할 비율과 다를 수 있음

---

### 3. 키보드 단축키 기능의 타 호환성

**가능합니다. 이미 대부분 범용적으로 구현되어 있습니다.**

현재 구조:
- **키보드 단축키 감지**: `KeyEvent` + `AccessibilityService.onKeyEvent()` 사용 → **모든 물리 키보드에서 작동** (블루투스, USB, 포고핀 무관)
- **물리 키보드 감지**: `InputDevice` API로 `SOURCE_KEYBOARD + KEYBOARD_TYPE_ALPHABETIC + !isVirtual` 체크 → **연결 방식 무관하게 감지 가능**
- **블루투스 키보드 감지**: `BluetoothUtils.isKeyboardDevice()`에서 Bluetooth 클래스 기반 + 이름 패턴 매칭 (`"keyboard"`, `"kb"`, `"magic keyboard"`, `"k380"`, `"k480"`, `"mx keys"` 등)

**배터리 잔량 관련:**
- BLE GATT 배터리 서비스 UUID(`0x180F`)는 **표준 Bluetooth 규격**이므로 LG KBA10 전용이 아닙니다
- 단, BLE GATT 배터리가 작동하려면 키보드가 BLE Battery Service를 지원해야 합니다 (대부분의 최신 BT 키보드는 지원)
- **USB/포고핀 키보드의 배터리**: 이들은 기기 자체 전원을 사용하므로 배터리 측정이 불필요합니다

**필요한 수정:**
- USB/유선 키보드 연결 시 배터리 관련 UI 숨기기 → `InputDevice` API로 연결 방식 판별 후 분기
- `KeyboardSettingsFragment.kt`의 "LG KBA10" 하드코딩 제거 → 범용 키보드 목록으로 전환
- KBA10 미발견 경고 배너 → 제거 또는 "블루투스 키보드 미감지" 범용 메시지로 변경

---

### 4. 와콤 펜 기능 미지원 - 기기 판별

**가능합니다.**

현재 코드에 `Build.MODEL`, `Build.MANUFACTURER` 등으로 LG 울트라탭을 직접 체크하는 부분은 **없습니다**. 대신 펜 감지를 `InputDevice` 이름(`"himax"`, `"stylus"`)과 특정 KeyCode(`BTN_STYLUS`, `KEYCODE_PENA/PENB`)로 합니다.

**추천 구현:**
```kotlin
fun isUltraTabDevice(): Boolean {
    return Build.MODEL.contains("10A30Q", ignoreCase = true) ||
           Build.DEVICE.contains("cayman", ignoreCase = true) // LG UltraTab 코드명
}
```
또는 더 범용적으로:
```kotlin
fun hasWacomPenSupport(): Boolean {
    return InputDevice.getDeviceIds().any { id ->
        val device = InputDevice.getDevice(id)
        device?.name?.let { 
            it.contains("himax", true) || it.contains("wacom", true) || it.contains("stylus", true)
        } == true
    }
}
```

- 울트라탭이 아닌 기기: 펜 설정 메뉴 전체 숨기기, ADB 권한 요청(`WRITE_SECURE_SETTINGS`) 숨기기
- 런타임에 `hasWacomPenSupport()` 체크하여 동적으로 표시/숨기기

---

### 5. 하드웨어 정보 메뉴

**가능합니다.**

`HardwareInfoFragment.kt`는 이미 여러 벤더를 범용적으로 처리합니다:
- 터치 IC: Himax, Goodix, Wacom 등 여러 벤더 감지
- 디스플레이: `/sys/class/graphics/fb0/` 등 sysfs 경로 탐색
- `Build.MODEL`, `Build.MANUFACTURER` 등은 정보 표시용으로만 사용

**수정 필요사항:**
- LG 전용 sysfs 경로가 없는 기기에서 graceful fallback 확인
- 블루투스 키보드 정보에 "배터리 미지원" 표시 추가 (USB 키보드의 경우)

---

### 6. 실험적 기능 (분할화면) - 타 기기 호환

**기본적으로 호환 가능하지만, Android 버전별 주의사항이 있습니다.**

현재 분할화면 구현:
- `GLOBAL_ACTION_TOGGLE_SPLIT_SCREEN` — API 24+에서 작동
- `FLAG_ACTIVITY_LAUNCH_ADJACENT` — API 24+
- 분할화면 상태 감지: Accessibility Window 분석 (API 무관하게 작동)
- `ActivityInfo.resizeMode` 체크 — API 24+

**Android 버전별 차이:**
- **Android 7~11**: 분할화면은 기본적으로 같은 방식이지만, Android 12부터 분할화면 UX가 약간 변경됨 (새로운 taskbar UI 등)
- **Android 12+**: 현재 코드와 동일하게 작동
- **Android 15**: Play Store 정책상 targetSdk 35 필수, 분할화면 API 변경 없음

**태스크바를 기본 제공으로 전환하는 계획:**
- 태스크바 자체는 분할화면과 독립적이므로 안전하게 분리 가능
- `RecentAppsTaskbar`를 네비바 메뉴 토글로 옮기는 것은 UI 변경만으로 가능
- 분할화면 슬라이드 제스처만 실험적 기능으로 남기면 됩니다

---

### 7. 인앱 결제 (기부)

**기술적으로 가능합니다.**

- Google Play Billing Library (현재 v7.x) 사용
- 1회성 결제(소모성 상품)로 구현: `BillingClient.ProductType.INAPP`
- 기부 형태이므로 기능 해금 로직 불필요 → 결제 완료 시 감사 메시지만 표시
- `$9.99 / ₩10,000` 가격대 설정 가능

**필요사항:**
- Google Play Console에서 판매자 등록 (은행 계좌, 세금 정보)
- 공개 테스트 14일 + 20명 이상 테스터 → 프로덕션 전환 후에야 인앱 결제 가능
- `build.gradle`에 `implementation 'com.android.billingclient:billing-ktx:7.x.x'` 추가

---

### 종합 요약

| 항목 | 가능 여부 | 난이도 | 비고 |
|------|----------|--------|------|
| minSdk 낮추기 (→ API 26) | ✅ | 중간 | 블루투스 권한 분기, 알림 채널 분기 필요 |
| 타 해상도 호환 | ✅ | 낮음 | 이미 dp 기반, 미세 조정만 필요 |
| 타 키보드 호환 | ✅ | 중간 | KBA10 하드코딩 제거, USB/BT 분기 |
| 와콤 펜 기기 판별 | ✅ | 낮음 | InputDevice 기반 감지 + 메뉴 숨기기 |
| 하드웨어 정보 범용화 | ✅ | 낮음 | 이미 대부분 범용적 |
| 분할화면 타 기기 호환 | ✅ (실험적) | 중간 | API 24+ 동일 방식, 일부 기기별 동작 차이 가능 |
| 인앱 결제 (기부) | ✅ | 낮음 | 프로덕션 전환 후 가능, Billing Library 통합 |